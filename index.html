<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"/>
  <title>Cadastro de Parceiros - Seg Imob</title>
  <!-- ... SEU CSS ORIGINAL ... -->
</head>
<body>

  <div class="form-container">
    <div class="header">
      <h1>Cadastro de Parceiros</h1>
      <div class="subheading">Conecte-se conosco e faça parte da nossa rede</div>
    </div>

    <form id="leadForm"
          action="https://webto.salesforce.com/servlet/servlet.WebToLead?encoding=UTF-8&amp;orgId=00D6A000002ImjZ"
          method="POST">

      <!-- Salesforce hidden fields -->
      <input type="hidden" name="oid" value="00D6A000002ImjZ"/>
      <input type="hidden" name="retURL" value="https://salesforcehenrique.github.io/"/>
      <input type="hidden" id="company" name="company" value=""/>

      <!-- Web-to-Lead padrão -->
      <input type="hidden" name="state" id="state_std" value=""/>
      <input type="hidden" name="country" value="Brasil"/>

      <!-- Campos ocultos para mapFields -->
      <input type="hidden" id="first_name"  name="first_name"  value=""/>
      <input type="hidden" id="last_name"   name="last_name"   value=""/>
      <input type="hidden" id="email_sf"    name="email"       value=""/>
      <input type="hidden" id="city_sf"     name="city"        value=""/>
      <input type="hidden" id="street_sf"   name="street"      value=""/>
      <input type="hidden" id="zip_sf"      name="zip"         value=""/>
      <input type="hidden" id="salutation"  name="salutation"  value=""/>
      <input type="hidden" id="phone_sf"    name="phone"       value=""/>
      <input type="hidden" id="mobile_sf"   name="mobile"      value=""/>
      <input type="hidden" id="lead_source" name="lead_source" value=""/>

      <!-- ... TODO O RESTANTE DO SEU FORMULÁRIO ORIGINAL ... -->

      <div class="submit-section">
        <button type="submit" class="submit-button">Enviar Cadastro</button>
      </div>
    </form>
  </div>

  <!-- Scripts originais (máscaras, lookup, carrossel) -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/imask/6.6.1/imask.min.js"></script>
  <script>
    // ... seu código de IMask, buscarCNPJ, buscarCEP, show/hide, carousel ...
  </script>

  <!-- Envio + alerta + notificação via email -->
  <script>
    (function(){
      const form = document.getElementById('leadForm');
      function mapFields(){
        const parts = document.getElementById('responsavel').value.trim().split(' ');
        document.getElementById('first_name').value = parts.shift()||'';
        document.getElementById('last_name').value  = parts.join(' ')||'';
        document.getElementById('email_sf').value   = document.getElementById('email_responsavel').value;
        document.getElementById('city_sf').value    = document.getElementById('cidade').value;
        document.getElementById('street_sf').value  = document.getElementById('logradouro').value;
        document.getElementById('zip_sf').value     = document.getElementById('cep').value;
        document.getElementById('salutation').value = document.getElementById('cargo').value;
        document.getElementById('phone_sf').value   = document.getElementById('tel_responsavel').value;
        document.getElementById('mobile_sf').value  = '';
        document.getElementById('lead_source').value= 'Site-SegImob';
        document.getElementById('state_std').value  = document.getElementById('estado').value;
      }

      form.addEventListener('submit', function(evt){
        // Preenche os hidden
        mapFields();

        // Exibe alerta de sucesso para o usuário
        alert('✅ Seu lead está a caminho! Nossa equipe recebeu um email e entrará em contato o mais rápido possível.');

        // Envia email de notificação para henrique
        const subject = encodeURIComponent('Novo lead Seg Imob');
        const body    = encodeURIComponent(
          'CNPJ: ' + document.getElementById('cnpj').value +
          '\nResponsável: ' + document.getElementById('responsavel').value +
          '\nEmail: ' + document.getElementById('email_responsavel').value
        );
        window.open(`mailto:henrique@cscorp.tec.br?subject=${subject}&body=${body}`, '_blank');

        // Finalmente submete o form ao Salesforce
        // (não impedimos o comportamento padrão)
      });
    })();
  </script>

</body>
</html>
