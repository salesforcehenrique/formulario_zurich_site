      <!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <title>Cadastro de Parceiros - Seg Imob</title>
  <style>
    *{margin:0;padding:0;box-sizing:border-box;}
    body{font-family:"Segoe UI",Roboto,Arial,sans-serif;background:linear-gradient(135deg,#f4f6f9,#e8ecf3);padding:20px;color:#333;min-height:100vh;}
    .form-container{max-width:1200px;margin:0 auto;background:#fff;border-radius:12px;padding:40px;box-shadow:0 8px 32px rgba(0,0,0,0.1);position:relative;}
    .header{text-align:center;margin-bottom:40px;}
    .header h1{font-size:28px;font-weight:700;color:#222;margin-bottom:8px;}
    .header .subheading{font-size:16px;color:#0073ff;font-weight:500;}
    .form-section{margin-bottom:40px;padding:30px;background:#f8fafc;border-radius:10px;border-left:4px solid #0073ff;opacity:0;transform:translateY(20px);animation:fadeInUp .6s ease forwards;}
    .form-section:nth-child(n){animation-delay:calc(.1s * var(--i));}
    @keyframes fadeInUp{to{opacity:1;transform:translateY(0)}}
    .section-title{font-size:20px;font-weight:600;color:#222;margin-bottom:20px;display:flex;align-items:center;gap:10px;}
    .section-icon{width:24px;height:24px;background:#0073ff;border-radius:50%;display:flex;align-items:center;justify-content:center;color:white;font-size:12px;font-weight:bold;}
    .form-grid{display:grid;gap:20px;}
    .form-grid.single-column{grid-template-columns:1fr;}
    .form-grid.production{grid-template-columns:1fr 1fr;}
    .form-group{display:flex;flex-direction:column;position:relative;}
    .form-group label{font-size:14px;font-weight:600;margin-bottom:8px;color:#374151;}
    .form-group input,.form-group select,.form-group textarea{padding:14px 16px;border-radius:8px;border:2px solid #e5e7eb;font-size:14px;background:#fff;transition:all .3s ease;font-family:inherit;}
    .form-group input:focus,.form-group select:focus{border-color:#0073ff;box-shadow:0 0 0 3px rgba(0,115,255,0.1);outline:none;transform:translateY(-1px);}
    .form-group input[readonly]{background:#f9fafb;color:#6b7280;cursor:not-allowed;}
    .error-msg{color:#ef4444;font-size:12px;margin-top:6px;}
    .radio-group{display:flex;gap:20px;margin-top:10px;align-items:center;}
    .radio-group label{display:flex;align-items:center;gap:8px;font-weight:500;cursor:pointer;padding:8px 12px;border-radius:6px;transition:background .2s ease;}
    .radio-group label:hover{background:#f3f4f6;}
    .agenda-section{background:linear-gradient(135deg,#f0f9ff,#e0f2fe);border-left-color:#0284c7;}
    .calendars-container{display:none;margin-top:20px;}
    .calendars-grid{display:grid;grid-template-columns:1fr 1fr;gap:20px;}
    .calendar-wrapper{position:relative;padding-bottom:0;height:auto;overflow:visible;border-radius:8px;box-shadow:0 4px 12px rgba(0,0,0,0.1);background:#fff;}
    .calendar-wrapper iframe{position:relative;width:100%;height:450px;border:none;border-radius:8px;}
    .calendar-title{font-size:14px;font-weight:600;color:#374151;margin-bottom:10px;text-align:center;}
    .submit-section{text-align:center;margin-top:40px;padding-top:30px;border-top:2px solid #e5e7eb;}
    .submit-button{background:linear-gradient(135deg,#0073ff,#00c6ff);color:white;padding:16px 40px;font-size:16px;font-weight:600;border:none;border-radius:8px;cursor:pointer;transition:all .3s ease;box-shadow:0 4px 12px rgba(0,115,255,0.3);}
    .submit-button:hover{transform:translateY(-2px);box-shadow:0 6px 20px rgba(0,115,255,0.4);}
    .submit-button:disabled{opacity:.6;cursor:not-allowed;}
    @media(max-width:768px){.form-container{padding:20px;margin:10px;} .calendars-grid{grid-template-columns:1fr;} .calendar-wrapper iframe{height:350px;} .form-grid,.form-grid.production{grid-template-columns:1fr;} .header h1{font-size:24px;} .section-title{font-size:18px;}}
    .loading{position:relative;pointer-events:none;}
    .loading::after{content:'';position:absolute;top:50%;right:12px;width:16px;height:16px;border:2px solid #e5e7eb;border-top:2px solid #0073ff;border-radius:50%;animation:spin 1s linear infinite;transform:translateY(-50%);}
    @keyframes spin{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}
  </style>
</head>
<body>
  <div class="form-container">
    <div class="header"><h1>Cadastro de Parceiros</h1><p class="subheading">Conecte-se conosco e faça parte da nossa rede</p></div>
    <form id="leadForm" action="https://webto.salesforce.com/servlet/servlet.WebToLead?encoding=UTF-8&orgId=00D6A000002ImjZ" method="POST">
      <input type="hidden" name="oid" value="00D6A000002ImjZ">
      <input type="hidden" name="retURL" value="https://salesforcehenrique.github.io/">
      <input type="hidden" id="company" name="company" value="">
      <div class="form-section" style="--i:1">
        <h3 class="section-title"><span class="section-icon">1</span>Identificação da Corretora</h3>
        <div class="form-grid single-column">
          <div class="form-group">
@@ -75,9 +127,177 @@ <h3 class="section-title"><span class="section-icon">1</span>Identificação da
        <div class="form-grid">
          <div class="form-group"><label for="razao_social">Razão Social *</label><input id="razao_social" name="00NSG00000QKCIz" type="text" readonly required></div>
          <div class="form-group"><label for="fantasia">Nome Fantasia *</label><input id="fantasia" name="00NIa000000NlQQ" type="text" readonly required></div>
          <div class="form-group"><label for="fantasia">Telefone da Corretora *</label><input id="telefone_da_corretora" type="number" readonly required></div>
        </div>
      </div>
      <div class="form-section" style="--i:2">
        <h3 class="section-title"><span class="section-icon">2</span>Endereço da Corretora</h3>
        <div class="form-grid">
          <div class="form-group"><label for="cep">CEP *</label><input id="cep" name="cep" maxlength="9" type="text" required></div>
          <div class="form-group"><label for="numero">Número *</label><input id="numero" name="numero" type="text" required></div>
        </div>
        <div class="form-grid single-column">
          <div class="form-group"><label for="logradouro">Logradouro *</label><input id="logradouro" name="street" type="text" readonly required></div>
        </div>
        <div class="form-grid">
          <div class="form-group"><label for="bairro">Bairro *</label><input id="bairro" name="bairro" type="text" readonly required></div>
          <div class="form-group"><label for="cidade">Cidade *</label><input id="cidade" name="cidade" type="text" readonly required></div>
          <div class="form-group"><label for="estado">Estado *</label><input id="estado" name="estado" type="text" readonly required></div>
        </div>
      </div>
      <div class="form-section" style="--i:3">
        <h3 class="section-title"><span class="section-icon">3</span>Dados do Responsável</h3>
        <div class="form-grid">
          <div class="form-group"><label for="responsavel">Nome *</label><input id="responsavel" name="00NSG00000QKgtm" type="text" required></div>
          <div class="form-group"><label for="cargo">Cargo *</label><select id="cargo" name="00NSG00000QKGWI" required><option value="">Selecione</option><option>Proprietário</option><option>Diretor</option><option>Gerente</option><option>Funcionário</option></select></div>
        </div>
      </div>
      <div class="form-section" style="--i:4">
        <h3 class="section-title"><span class="section-icon">4</span>Informações de Produção</h3>
        <div class="form-grid production">
          <div class="form-group">
            <label for="incendio">Produção Incêndio</label>
            <select id="incendio" name="00NSG00000QGVKd">
              <option value="">Selecione seguradora</option>
              <option>Alfa/Safra</option>
              <option>Mapfre</option>
              <option>Porto Seguro</option>
              <option>Sancor</option>
              <option>Tokio Marine</option>
              <option>Zurich</option>
            </select>
          </div>
          <div class="form-group">
            <label for="fianca">Produção Fiança</label>
            <select id="fianca" name="00NSG00000QGgQv">
              <option value="">Selecione seguradora</option>
              <option>Porto Seguro</option>
              <option>Pottencial</option>
              <option>Tokio Marine</option>
              <option>TOO</option>
            </select>
          </div>
          <div class="form-group">
            <label for="capitalizacao">Produção Capitalização</label>
            <select id="capitalizacao" name="00NSG00000QGe4A">
              <option value="">Selecione seguradora</option>
              <option>Icatu</option>
              <option>Porto Seguro</option>
            </select>
          </div>
        </div>
      </div>
      <div class="form-section" style="--i:5">
        <h3 class="section-title"><span class="section-icon">5</span>Tecnologia e Sistemas</h3>
        <div class="form-grid">
          <div class="form-group"><label for="plataforma">Possui plataforma própria?</label>
            <select id="plataforma" name="00NSG00000QGcb4"><option value="">Selecione</option><option>Sim</option><option>Não</option></select>
          </div>
        </div>
      </div>
      <div class="form-section agenda-section" style="--i:6">
        <h3 class="section-title"><span class="section-icon">6</span>Agendamento</h3>
        <div class="form-group">
          <label>Deseja agendar uma reunião?</label>
          <div class="radio-group">
            <label><input type="radio" name="agendar_reuniao" value="sim"> Sim</label>
            <label><input type="radio" name="agendar_reuniao" value="nao" checked> Não</label>
          </div>
        </div>
        <div id="calendarEmbedContainer" class="calendars-container">
          <p style="text-align:center;margin-bottom:20px;color:#6b7280;font-size:14px;">Escolha um horário:</p>
          <div class="calendars-grid">
            <div><div class="calendar-title">Agenda - Consultor 1</div><div class="calendar-wrapper"><iframe src="https://calendar.app.google/B54Z6pKjMCbgjTUv9" allowfullscreen></iframe></div></div>
            <div><div class="calendar-title">Agenda - Consultor 2</div><div class="calendar-wrapper"><iframe src="https://calendar.app.google/U5oztqWefrCVZr6z9" allowfullscreen></iframe></div></div>
          </div>
        </div>
      </div>
      <div class="submit-section"><button type="submit" class="submit-button">Enviar Cadastro</button></div>
    </form>
  </div>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/imask/6.6.1/imask.min.js"></script>
  <script>
    const masks = {
      cnpj: IMask(document.getElementById('cnpj'), { mask:'00.000.000/0000-00' }),
      cep: IMask(document.getElementById('cep'), { mask:'00000-000' })
    };
    function showInlineError(input,message){
      let err = input.nextElementSibling;
      if(!err || !err.classList.contains('error-msg')){
        err = document.createElement('div');
        err.className='error-msg';
        input.parentNode.appendChild(err);
      }
      err.textContent = message;
    }
    function clearInlineError(input){
      let err=input.nextElementSibling;
      if(err && err.classList.contains('error-msg')) err.remove();
    }
    async function buscarCNPJ(cnpj){
      const sanitized = cnpj.replace(/\D/g,'');
      if(sanitized.length!==14) return;
      const cnpjInput = document.getElementById('cnpj');
      cnpjInput.classList.add('loading');
      try{
        const res = await fetch(`https://www.receitaws.com.br/v1/cnpj/${sanitized}`);
        const data = await res.json();
        if(data.status !== 'ERROR'){
          document.getElementById('razao_social').value = data.nome || '';
          document.getElementById('fantasia').value = data.fantasia || data.nome || '';
          document.getElementById('company').value = data.nome || '';
          clearInlineError(cnpjInput);
        } else showInlineError(cnpjInput,'CNPJ não encontrado.');
      } catch {
        showInlineError(cnpjInput,'Erro ao consultar CNPJ.');
      } finally {
        cnpjInput.classList.remove('loading');
      }
    }
    async function buscarCEP(cep){
      const sanitized=cep.replace(/\D/g,'');
      if(sanitized.length!==8) return;
      const cepInput=document.getElementById('cep');
      cepInput.classList.add('loading');
      try{
        const res=await fetch(`https://viacep.com.br/ws/${sanitized}/json/`);
        const data=await res.json();
        if(!data.erro){
          document.getElementById('logradouro').value=data.logradouro||'';
          document.getElementById('bairro').value=data.bairro||'';
          document.getElementById('cidade').value=data.localidade||'';
          document.getElementById('estado').value=data.uf||'';
          clearInlineError(cepInput);
        } else showInlineError(cepInput,'CEP inválido.');
      } catch {
        showInlineError(cepInput,'Erro ao consultar CEP.');
      } finally {
        cepInput.classList.remove('loading');
      }
    }
    document.addEventListener('DOMContentLoaded',()=>{
      document.getElementById('cnpj').addEventListener('blur',function(){buscarCNPJ(this.value);});
      document.getElementById('cep').addEventListener('blur',function(){buscarCEP(this.value);});
      document.querySelectorAll('input[name="agendar_reuniao"]').forEach(r=>{
        r.addEventListener('change',function(){
          document.getElementById('calendarEmbedContainer').style.display = (this.value==='sim')?'block':'none';
        });
      });
      document.getElementById('leadForm').addEventListener('submit',function(e){
        const req=this.querySelectorAll('[required]');
        let hasError=false;
        req.forEach(f=>{
          if(!f.value.trim()){ showInlineError(f,'Campo obrigatório.'); hasError=true;} else clearInlineError(f);
        });
        if(hasError){ e.preventDefault(); return; }
        const btn=this.querySelector('.submit-button');
        btn.disabled=true;
        btn.textContent='Enviando...';
      });
    });
  </script>
</body>
</html>
