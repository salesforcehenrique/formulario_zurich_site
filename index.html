<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Cadastro de Parceiros - Seg Imob</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: "Segoe UI", Roboto, Arial, sans-serif;
      background: linear-gradient(135deg, #f4f6f9 0%, #e8ecf3 100%);
      padding: 20px;
      color: #333;
      min-height: 100vh;
    }

    .form-container {
      max-width: 1200px;
      margin: 0 auto;
      background: #fff;
      border-radius: 12px;
      padding: 40px;
      box-shadow: 0 8px 32px rgba(0,0,0,0.1);
      position: relative;
      overflow: hidden;
    }

    .form-container::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: linear-gradient(90deg, #0073ff, #00c6ff);
    }

    .header {
      text-align: center;
      margin-bottom: 40px;
    }

    .header h1 {
      font-size: 28px;
      font-weight: 700;
      color: #222;
      margin-bottom: 8px;
    }

    .header .subheading {
      font-size: 16px;
      color: #0073ff;
      font-weight: 500;
    }

    .form-section {
      margin-bottom: 40px;
      padding: 30px;
      background: #f8fafc;
      border-radius: 10px;
      border-left: 4px solid #0073ff;
      position: relative;
    }

    .section-title {
      font-size: 20px;
      font-weight: 600;
      color: #222;
      margin-bottom: 20px;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .section-icon {
      width: 24px;
      height: 24px;
      background: #0073ff;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 12px;
      font-weight: bold;
    }

    .form-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
    }

    .form-grid.single-column {
      grid-template-columns: 1fr;
    }

    .form-group {
      display: flex;
      flex-direction: column;
    }

    .form-group label {
      font-size: 14px;
      font-weight: 600;
      margin-bottom: 8px;
      color: #374151;
    }

    .form-group input,
    .form-group select,
    .form-group textarea {
      padding: 14px 16px;
      border-radius: 8px;
      border: 2px solid #e5e7eb;
      font-size: 14px;
      background: #fff;
      transition: all 0.3s ease;
      font-family: inherit;
    }

    .form-group input:focus,
    .form-group select:focus,
    .form-group textarea:focus {
      border-color: #0073ff;
      box-shadow: 0 0 0 3px rgba(0,115,255,0.1);
      outline: none;
      transform: translateY(-1px);
    }

    .form-group input:hover,
    .form-group select:hover {
      border-color: #9ca3af;
    }

    .form-group input[readonly] {
      background: #f9fafb;
      color: #6b7280;
      cursor: not-allowed;
    }

    .radio-group {
      display: flex;
      gap: 20px;
      margin-top: 10px;
      align-items: center;
    }

    .radio-group label {
      display: flex;
      align-items: center;
      gap: 8px;
      font-weight: 500;
      cursor: pointer;
      padding: 8px 12px;
      border-radius: 6px;
      transition: background 0.2s ease;
    }

    .radio-group label:hover {
      background: #f3f4f6;
    }

    .radio-group input[type="radio"] {
      width: 18px;
      height: 18px;
      margin: 0;
    }

    /* Seção de Agendamento Especial */
    .agenda-section {
      background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
      border-left-color: #0284c7;
    }

    .calendars-container {
      display: none;
      margin-top: 20px;
    }

    .calendars-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
      margin-top: 20px;
    }

    .calendar-wrapper {
      position: relative;
      padding-bottom: 60%;
      height: 0;
      overflow: hidden;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      background: #fff;
    }

    .calendar-wrapper iframe {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      border: none;
      border-radius: 8px;
    }

    .calendar-title {
      font-size: 14px;
      font-weight: 600;
      color: #374151;
      margin-bottom: 10px;
      text-align: center;
    }

    .submit-section {
      text-align: center;
      margin-top: 40px;
      padding-top: 30px;
      border-top: 2px solid #e5e7eb;
    }

    .submit-button {
      background: linear-gradient(135deg, #0073ff 0%, #00c6ff 100%);
      color: white;
      padding: 16px 40px;
      font-size: 16px;
      font-weight: 600;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 4px 12px rgba(0,115,255,0.3);
    }

    .submit-button:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(0,115,255,0.4);
    }

    .submit-button:active {
      transform: translateY(0);
    }

    /* Responsividade */
    @media (max-width: 768px) {
      .form-container {
        padding: 20px;
        margin: 10px;
      }

      .calendars-grid {
        grid-template-columns: 1fr;
        gap: 15px;
      }

      .calendar-wrapper {
        padding-bottom: 70%;
      }

      .form-grid {
        grid-template-columns: 1fr;
      }

      .header h1 {
        font-size: 24px;
      }

      .section-title {
        font-size: 18px;
      }
    }

    /* Animações */
    .form-section {
      animation: fadeInUp 0.6s ease forwards;
      opacity: 0;
      transform: translateY(20px);
    }

    .form-section:nth-child(1) { animation-delay: 0.1s; }
    .form-section:nth-child(2) { animation-delay: 0.2s; }
    .form-section:nth-child(3) { animation-delay: 0.3s; }
    .form-section:nth-child(4) { animation-delay: 0.4s; }
    .form-section:nth-child(5) { animation-delay: 0.5s; }

    @keyframes fadeInUp {
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* Estados de loading */
    .loading {
      position: relative;
      pointer-events: none;
    }

    .loading::after {
      content: '';
      position: absolute;
      top: 50%;
      right: 12px;
      width: 16px;
      height: 16px;
      border: 2px solid #e5e7eb;
      border-top: 2px solid #0073ff;
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
  </style>
</head>
<body>
  <div class="form-container">
    <div class="header">
      <h1>Cadastro de Parceiros</h1>
      <p class="subheading">Conecte-se conosco e faça parte da nossa rede</p>
    </div>
  
    <form id="leadForm" 
          action="https://webto.salesforce.com/servlet/servlet.WebToLead?encoding=UTF-8&orgId=00D6A000002ImjZ" 
          method="POST">

      <input type="hidden" name="oid" value="00D6A000002ImjZ">
      <input type="hidden" name="retURL" value="https://salesforcehenrique.github.io/">
      <input type="hidden" id="company" name="company" value="" />

      <!-- Seção 1: Identificação da Corretora -->
      <div class="form-section">
        <h3 class="section-title">
          <span class="section-icon">1</span>
          Identificação da Corretora
        </h3>
        
        <div class="form-grid single-column">
          <div class="form-group">
            <label for="cnpj">CNPJ *</label>
            <input id="cnpj" name="00NSG00000QKAKR" maxlength="18" type="text" 
                   placeholder="00.000.000/0000-00" required>
          </div>
        </div>

        <div class="form-grid">
          <div class="form-group">
            <label for="razao_social">Razão Social *</label>
            <input id="razao_social" name="00NSG00000QKCIz" type="text" 
                   placeholder="Razão Social da empresa" readonly required>
          </div>
          <div class="form-group">
            <label for="fantasia">Nome Fantasia *</label>
            <input id="fantasia" name="00NIa000000NlQQ" type="text" 
                   placeholder="Nome fantasia da empresa" readonly required>
          </div>
          <div class="form-group">
            <label for="telefone_corretora">Telefone da Corretora *</label>
            <input id="telefone_corretora" name="telefone_corretora" type="tel" 
                   placeholder="(00) 0000-0000" required>
          </div>
          <div class="form-group">
            <label for="imobiliarias">Quantidade de Imobiliárias *</label>
            <input id="imobiliarias" name="00N6A00000NUmQa" type="number" min="1" 
                   placeholder="Número de imobiliárias" required>
          </div>
        </div>
      </div>

      <!-- Seção 2: Endereço da Corretora -->
      <div class="form-section">
        <h3 class="section-title">
          <span class="section-icon">2</span>
          Endereço da Corretora
        </h3>
        
        <div class="form-grid">
          <div class="form-group">
            <label for="cep">CEP *</label>
            <input id="cep" name="cep" type="text" maxlength="9" 
                   placeholder="00000-000" required>
          </div>
          <div class="form-group">
            <label for="numero">Número *</label>
            <input id="numero" name="numero" type="text" 
                   placeholder="Número do endereço" required>
          </div>
        </div>

        <div class="form-grid single-column">
          <div class="form-group">
            <label for="logradouro">Logradouro *</label>
            <input id="logradouro" name="street" type="text" 
                   placeholder="Rua, Avenida, etc." readonly required>
          </div>
        </div>

        <div class="form-grid">
          <div class="form-group">
            <label for="complemento">Complemento</label>
            <input id="complemento" name="complemento" type="text" 
                   placeholder="Apartamento, sala, etc.">
          </div>
          <div class="form-group">
            <label for="bairro">Bairro *</label>
            <input id="bairro" name="bairro" type="text" 
                   placeholder="Bairro" readonly required>
          </div>
          <div class="form-group">
            <label for="cidade">Cidade *</label>
            <input id="cidade" name="cidade" type="text" 
                   placeholder="Cidade" readonly required>
          </div>
          <div class="form-group">
            <label for="estado">Estado *</label>
            <input id="estado" name="estado" type="text" 
                   placeholder="Estado" readonly required>
          </div>
        </div>
      </div>

      <!-- Seção 3: Dados do Responsável -->
      <div class="form-section">
        <h3 class="section-title">
          <span class="section-icon">3</span>
          Dados do Responsável da Corretora
        </h3>
        
        <div class="form-grid">
          <div class="form-group">
            <label for="responsavel">Nome do Responsável *</label>
            <input id="responsavel" name="00NSG00000QKgtm" type="text" 
                   placeholder="Nome completo do responsável" required>
          </div>
          <div class="form-group">
            <label for="cargo">Cargo *</label>
            <select id="cargo" name="00NSG00000QKGWI" required>
              <option value="">Selecione o cargo</option>
              <option value="Proprietário">Proprietário</option>
              <option value="Diretor">Diretor</option>
              <option value="Gerente">Gerente</option>
              <option value="Funcionário">Funcionário</option>
            </select>
          </div>
          <div class="form-group">
            <label for="email">Email do Contato *</label>
            <input id="email" name="email" type="email" 
                   placeholder="email@exemplo.com" required>
          </div>
          <div class="form-group">
            <label for="telefone_contato">Telefone do Contato *</label>
            <input id="telefone_contato" name="telefone_contato" type="tel" 
                   placeholder="(00) 00000-0000" required>
          </div>
        </div>
      </div>

      <!-- Seção 4: Informações de Produção -->
      <div class="form-section">
        <h3 class="section-title">
          <span class="section-icon">4</span>
          Informações de Produção
        </h3>
        
        <div class="form-grid">
          <div class="form-group">
            <label for="incendio">Produção Mensal Incêndio</label>
            <input id="incendio" name="00NSG00000QGVKd" type="number" step="0.01" 
                   placeholder="Valor em R$">
          </div>
          <div class="form-group">
            <label for="seguradora_incendio">Seguradora Principal - Incêndio</label>
            <input id="seguradora_incendio" name="Seguradora_principal_Incendio__c" type="text" 
                   placeholder="Nome da seguradora">
          </div>
          <div class="form-group">
            <label for="fianca">Produção Mensal Fiança</label>
            <input id="fianca" name="00NSG00000QGgQv" type="number" step="0.01" 
                   placeholder="Valor em R$">
          </div>
          <div class="form-group">
            <label for="seguradora_fianca">Seguradora Principal - Fiança</label>
            <input id="seguradora_fianca" name="Seguradora_principal_Fianca__c" type="text" 
                   placeholder="Nome da seguradora">
          </div>
          <div class="form-group">
            <label for="capitalizacao">Produção Mensal Capitalização</label>
            <input id="capitalizacao" name="00NSG00000QGe4A" type="number" step="0.01" 
                   placeholder="Valor em R$">
          </div>
          <div class="form-group">
            <label for="seguradora_capitalizacao">Seguradora Principal - Capitalização</label>
            <input id="seguradora_capitalizacao" name="Seguradora_principal_Tit_Capitalizacao__c" type="text" 
                   placeholder="Nome da seguradora">
          </div>
        </div>
      </div>

      <!-- Seção 5: Tecnologia e Sistemas -->
      <div class="form-section">
        <h3 class="section-title">
          <span class="section-icon">5</span>
          Tecnologia e Sistemas
        </h3>
        
        <div class="form-grid">
          <div class="form-group">
            <label for="plataforma">Possui plataforma própria?</label>
            <select id="plataforma" name="00NSG00000QGcb4">
              <option value="">Selecione</option>
              <option value="Sim">Sim</option>
              <option value="Não">Não</option>
            </select>
          </div>
          <div class="form-group" id="siteGroup" style="display:none;">
            <label for="site">Endereço do site</label>
            <input id="site" name="00NSG00000QGjlN" type="url" 
                   placeholder="https://www.exemplo.com">
          </div>
        </div>

        <div class="form-grid">
          <div class="form-group">
            <label for="erp">Possui parceria com ERP?</label>
            <select id="erp" name="00NSG00000QGYvd">
              <option value="">Selecione</option>
              <option value="Sim">Sim</option>
              <option value="Não">Não</option>
            </select>
          </div>
          <div class="form-group" id="erp_nomeGroup" style="display:none;">
            <label for="erp_nome">ERP Utilizado</label>
            <input id="erp_nome" name="00NSG00000QGgKU" type="text" 
                   placeholder="Nome do ERP">
          </div>
        </div>

        <div class="form-grid single-column" id="erp_extraGroup" style="display:none;">
          <div class="form-group">
            <label for="erp_extra">ERP para gerenciamento de seguros</label>
            <input id="erp_extra" name="ERP_para_gerenciamento" type="text" 
                   placeholder="Detalhes sobre o ERP de seguros">
          </div>
        </div>
      </div>

      <!-- Seção 6: Agendamento -->
      <div class="form-section agenda-section">
        <h3 class="section-title">
          <span class="section-icon">6</span>
          Agendamento de Reunião
        </h3>
        
        <div class="form-group">
          <label>Deseja agendar uma reunião conosco?</label>
          <div class="radio-group">
            <label>
              <input type="radio" name="agendar_reuniao" value="sim"> 
              Sim, quero agendar
            </label>
            <label>
              <input type="radio" name="agendar_reuniao" value="nao" checked> 
              Não, por enquanto não
            </label>
          </div>
        </div>
        
        <div id="calendarEmbedContainer" class="calendars-container">
          <p style="text-align: center; margin-bottom: 20px; color: #6b7280; font-size: 14px;">
            Escolha o melhor horário em uma das agendas disponíveis:
          </p>
          <div class="calendars-grid">
            <div>
              <div class="calendar-title">Agenda - Consultor 1</div>
              <div class="calendar-wrapper">
                <iframe src="https://calendar.app.google/B54Z6pKjMCbgjTUv9" allowfullscreen></iframe>
              </div>
            </div>
            <div>
              <div class="calendar-title">Agenda - Consultor 2</div>
              <div class="calendar-wrapper">
                <iframe src="https://calendar.app.google/U5oztqWefrCVZr6z9" allowfullscreen></iframe>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="submit-section">
        <button type="submit" class="submit-button">Enviar Cadastro</button>
      </div>
    </form>
  </div>

  <!-- Scripts -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/imask/6.6.1/imask.min.js"></script>
  <script>
    // Configuração de máscaras
    const masks = {
      cnpj: IMask(document.getElementById('cnpj'), { 
        mask: '00.000.000/0000-00' 
      }),
      cep: IMask(document.getElementById('cep'), { 
        mask: '00000-000' 
      }),
      telCorretora: IMask(document.getElementById('telefone_corretora'), { 
        mask: '(00) 0000-0000' 
      }),
      telContato: IMask(document.getElementById('telefone_contato'), { 
        mask: '(00) 00000-0000' 
      })
    };

    // Função para buscar dados do CNPJ
    async function buscarCNPJ(cnpj) {
      const sanitized = cnpj.replace(/\D/g, "");
      if (sanitized.length !== 14) return;
      
      const cnpjInput = document.getElementById('cnpj');
      cnpjInput.classList.add('loading');
      
      try {
        const response = await fetch(`https://publica.cnpj.ws/cnpj/${sanitized}`);
        const data = await response.json();

        if (data.razao_social) {
          document.getElementById('razao_social').value = data.razao_social || '';
          document.getElementById('fantasia').value = data.nome_fantasia || data.razao_social || '';
          document.getElementById('company').value = data.razao_social || '';
          
          // Animar os campos preenchidos
          ['razao_social', 'fantasia'].forEach(id => {
            const field = document.getElementById(id);
            field.style.transform = 'scale(1.02)';
            setTimeout(() => field.style.transform = '', 200);
          });
        }
      } catch (error) {
        console.error('Erro ao buscar CNPJ:', error);
        alert('Erro ao consultar CNPJ. Tente novamente.');
      } finally {
        cnpjInput.classList.remove('loading');
      }
    }

    // Função para buscar dados do CEP
    async function buscarCEP(cep) {
      const sanitized = cep.replace(/\D/g, "");
      if (sanitized.length !== 8) return;
      
      const cepInput = document.getElementById('cep');
      cepInput.classList.add('loading');
      
      try {
        const response = await fetch(`https://viacep.com.br/ws/${sanitized}/json/`);
        const data = await response.json();
        
        if (!data.erro) {
          document.getElementById('logradouro').value = data.logradouro || '';
          document.getElementById('bairro').value = data.bairro || '';
          document.getElementById('cidade').value = data.localidade || '';
          document.getElementById('estado').value = data.uf || '';
          
          // Animar os campos preenchidos
          ['logradouro', 'bairro', 'cidade', 'estado'].forEach(id => {
            const field = document.getElementById(id);
            field.style.transform = 'scale(1.02)';
            setTimeout(() => field.style.transform = '', 200);
          });
        }
      } catch (error) {
        console.error('Erro ao buscar CEP:', error);
        alert('Erro ao consultar CEP. Tente novamente.');
      } finally {
        cepInput.classList.remove('loading');
      }
    }

    // Event listeners
    document.addEventListener('DOMContentLoaded', () => {
      // CNPJ blur event
      document.getElementById('cnpj').addEventListener('blur', function () {
        buscarCNPJ(this.value);
      });

      // CEP blur event
      document.getElementById('cep').addEventListener('blur', function () {
        buscarCEP(this.value);
      });

      // Plataforma própria
      document.getElementById('plataforma').addEventListener('change', function () {
        const siteGroup = document.getElementById('siteGroup');
        if (this.value === 'Sim') {
          siteGroup.style.display = 'block';
          siteGroup.style.animation = 'fadeInUp 0.3s ease forwards';
        } else {
          siteGroup.style.display = 'none';
        }
      });

      // ERP
      document.getElementById('erp').addEventListener('change', function () {
        const nomeGroup = document.getElementById('erp_nomeGroup');
        const extraGroup = document.getElementById('erp_extraGroup');
        
        if (this.value === 'Sim') {
          nomeGroup.style.display = 'block';
          extraGroup.style.display = 'block';
          nomeGroup.style.animation = 'fadeInUp 0.3s ease forwards';
          extraGroup.style.animation = 'fadeInUp 0.3s ease 0.1s forwards';
        } else {
          nomeGroup.style.display = 'none';
          extraGroup.style.display = 'none';
        }
      });

      // Agendamento
      document.querySelectorAll('input[name="agendar_reuniao"]').forEach(radio => {
        radio.addEventListener('change', function() {
          const container = document.getElementById("calendarEmbedContainer");
          if (this.value === 'sim') {
            container.style.display = 'block';
            container.style.animation = 'fadeInUp 0.5s ease forwards';
          } else {
            container.style.display = 'none';
          }
        });
      });

      // Validação de formulário
      document.getElementById('leadForm').addEventListener('submit', function(e) {
        const requiredFields = this.querySelectorAll('[required]');
        let hasError = false;
        
        requiredFields.forEach(field => {
          if (!field.value.trim()) {
            field.style.borderColor = '#ef4444';
            field.style.boxShadow = '0 0 0 3px rgba(239,68,68,0.1)';
            hasError = true;
            
            setTimeout(() => {
              field.style.borderColor = '';
              field.style.boxShadow = '';
            }, 3000);
          }
        });
        
        if (hasError) {
          e.preventDefault();
          alert('Por favor, preencha todos os campos obrigatórios.');
        }
      });
    });
  </script>
</body>
</html>

